let countryx="England",leaguex="Premier League";$(function(){$("#nav_league").addClass("active"),$("#nav_home").removeClass("active"),$("#nav_login").removeClass("active");let e=$("#season").val();getContent("England","Premier League",e),$("#league").on("click",function(){null!=e&&("ChampionsLeague"===this.value&&(countryx="World",leaguex="UEFA Champions League",e=$("#season").val()),"EuropaLeague"===this.value&&(countryx="World",leaguex="UEFA Europa League",e=$("#season").val()),"PremierLeague"===this.value&&(countryx="England",leaguex="Premier League",e=$("#season").val()),"Championship"===this.value&&(countryx="England",leaguex="Championship",e=$("#season").val()),"LeagueOne"===this.value&&(countryx="England",leaguex="League One",e=$("#season").val()),"Bundesliga"===this.value&&(countryx="Germany",leaguex="Bundesliga",e=$("#season").val()),"Bundesliga2"===this.value&&(countryx="Germany",leaguex="2. Bundesliga",e=$("#season").val()),"3Liga"===this.value&&(countryx="Germany",leaguex="3. Liga",e=$("#season").val()),"LaLiga2"===this.value&&(countryx="Spain",leaguex="Segunda DivisiÃ³n",e=$("#season").val()),"LaLiga"===this.value&&(countryx="Spain",leaguex="La Liga",e=$("#season").val()),"SerieA"===this.value&&(countryx="Italy",leaguex="Serie A",e=$("#season").val()),"SerieB"===this.value&&(countryx="Italy",leaguex="Serie B",e=$("#season").val()),"Eredivise"===this.value&&(countryx="Netherlands",leaguex="Eredivisie",e=$("#season").val()),"Ligue1"===this.value&&(countryx="France",leaguex="Ligue 1",e=$("#season").val()),"PrimeiraLiga"===this.value&&(countryx="Portugal",leaguex="Primeira Liga",e=$("#season").val()))})});async function getContent(e,a,t){let s=[];await $.ajax({url:"/fetch_leagues",method:"POST",headers:{Accept:"application/json; odata=verbose","Content-Type":"application/json; odata=verbose"},data:JSON.stringify({the_country:e,the_yyyy:t}),processData:!1,success:function(e){e?s=e.response:console.log("Error getting data from API")}});var l,n=s.filter(e=>e.league.name==a),i=[];n.length?(l=n[0].league.id,e=Number(t),t="<img width='50' height='50' src='"+n[0].league.logo+"'>&nbsp;&nbsp;&nbsp;<div><h6>"+n[0].country.name.toUpperCase()+"</h6><div class='leagueYear'><h4>"+n[0].league.name.toUpperCase()+"</h4><span> ("+t+"-"+e+")</span></div></div>",$("#league_logo").html(t),$.ajax({url:"fetch_league_table",method:"POST",headers:{Accept:"application/json; odata=verbose","Content-Type":"application/json; odata=verbose"},data:JSON.stringify({the_league_id_ex:l,the_season:e}),processData:!1,success:function(e){var a;e.response?(i=e.response[0].league.standings,a="<table style='width:100%;font-size:12px;' class='table'><tr><th style='width:5%'>#</th><th style='width:50%;text-align:left;'>Team</th><th style='width:5%'>GP</th><th style='width:5%'>W</th><th style='width:5%'>D</th><th style='width:5%'>L</th><th style='width:9%'>+/-</th><th style='width:6%'>GD</th><th style='width:6%'>PTS</th></tr>",i[0].forEach(e=>{a+="<tr><td style='width:5%'>"+e.rank+"</td><td style='width:50%;text-align:left;'><img class='Image TeamIcon' width='22' height='22' src='"+e.team.logo+"'>&nbsp;&nbsp;&nbsp;<b>"+e.team.name+"</b></td><td style='width:5%'>"+e.all.played+"</td><td style='width:5%'>"+e.all.win+"</td><td style='width:5%'>"+e.all.draw+"</td><td style='width:5%'>"+e.all.lose+"</td><td style='width:9%'>"+e.all.goals.for+" - "+e.all.goals.against+"</td><td style='width:6%'>"+e.goalsDiff+"</td><td style='width:6%'>"+e.points+"</td></tr>"}),a+="</table>",$("#league_table").html(a)):console.log("error reading data")}})):console.log("error getting league data/id")}$("#refresh").on("click",function(){var e=$("#season").val();getContent(countryx,leaguex,e),$(this).addClass("fa-spin");let a=$(this);setTimeout(function(){a.removeClass("fa-spin")},1e3),vNotify.success({title:"League Table Refreshed"})});